"use strict";var h=Object.create;var m=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var j=(o,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of P(e))!_.call(o,t)&&t!==i&&m(o,t,{get:()=>e[t],enumerable:!(n=x(e,t))||n.enumerable});return o};var p=(o,e,i)=>(i=o!=null?h(b(o)):{},j(e||!o||!o.__esModule?m(i,"default",{value:o,enumerable:!0}):i,o));var a=p(require("path"),1),d=require("url"),r=require("electron");var u=p(require("fs"),1),v=require("http"),w=p(require("path"),1),c=require("@vue/devtools-kit"),s=require("h3"),y=require("socket.io"),f=process.env.PORT||8098;function S(){let o=(0,s.createApp)();o.use("/",(0,s.eventHandler)(()=>"if(!window.process){window.process={env:{}}};"+u.default.readFileSync(w.default.join(__dirname,"./user-app.iife.js"),"utf-8")));let e=(0,v.createServer)((0,s.toNodeListener)(o));new y.Server(e,{cors:{origin:!0}}).on("connection",n=>{(0,c.setElectronProxyContext)(n),(0,c.createRpcProxy)({preset:"electron"}),n.broadcast.emit("vue-devtools:disconnect-user-app"),n.on("vue-devtools:init",()=>{n.broadcast.emit("vue-devtools:init")}),n.on("vue-devtools:disconnect",()=>{n.broadcast.emit("vue-devtools:disconnect")}),n.on("disconnect",t=>{t.indexOf("client")&&n.broadcast.emit("vue-devtools-disconnect-devtools")})}),e.listen(f,()=>{console.log(`listening on 0.0.0.0:${f}`)})}S();var l=null;function g(){l=new r.BrowserWindow({width:800,height:600,icon:a.default.join(__dirname,"../icons/128.png"),webPreferences:{webSecurity:!1,nodeIntegration:!0,contextIsolation:!1,devTools:!1}});let o=a.default.join(__dirname,"../app.html"),e=new d.URL(`file://${o}`).toString();l.setMenu(null),l.loadURL(new d.URL(e).toString()),l.on("closed",()=>{l=null})}r.app.on("ready",g);r.app.on("window-all-closed",()=>{process.platform!=="darwin"&&r.app.quit()});r.app.on("activate",()=>{l===null&&g()});
